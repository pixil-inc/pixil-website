---
import Icon from '@/components/shared/Icon.astro';
import type { Service } from '@/types';

interface Props {
  id: number;
  service: Service;
}

const { id, service } = Astro.props;
const { heading, description, icon } = service;
const top = id * 8 + 20;
---

<div
  class={`sticky top-${top} flex flex-col items-center gap-12 rounded-3xl border border-black/5 bg-white p-8 shadow-[0_-5px_30px_rgba(0,0,0,0.08)] transition-all duration-500 md:flex-row md:p-16`}
>
  <div class="flex-1 space-y-6">
    <div>
      <span class="text-primary/50 rounded-full border border-black/10 px-2 py-1 font-mono text-xs"
        >{id.toString().padStart(2, '0')}</span
      >
    </div>
    <h3 class="font-display text-3xl font-medium md:text-4xl" set:html={heading} />
    <p class="text-primary/60 text-lg leading-relaxed">
      {description}
    </p>
  </div>
  <div
    class="neu-base group relative flex aspect-[4/3] w-full items-center justify-center rounded-2xl md:w-1/2"
  >
    <div class="absolute inset-4 rounded-xl border border-white/40"></div>
    <div
      class="neu-embossed flex h-48 w-48 items-center justify-center rounded-full transition-transform duration-700 group-hover:scale-105"
    >
      <div
        class="neu-pressed text-primary/70 flex h-28 w-28 items-center justify-center rounded-full"
      >
        <Icon name={icon} class="text-primary/70 h-16 w-16" />
      </div>
    </div>
  </div>
</div>

<style>
  /* Local CSS variables for this component */
  :global(:root) {
    --neu-oatmeal: #f8f7f4;
    --neu-alternate: #d9d7d3;
    --neu-default: #ffffff;
  }

  /* Neumorphism styles - component scoped */
  .neu-base {
    background-color: var(--neu-oatmeal);
  }

  .neu-pressed {
    background-color: var(--neu-oatmeal);
    box-shadow:
      inset 8px 8px 16px var(--neu-alternate),
      inset -8px -8px 16px var(--neu-default);
  }

  .neu-embossed {
    background-color: var(--neu-oatmeal);
    box-shadow:
      12px 12px 24px var(--neu-alternate),
      -12px -12px 24px var(--neu-default);
  }
</style>
